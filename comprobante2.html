<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Comprobante</title>

<style>
* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

html, body {
  height: 100%;
  font-family: Arial, sans-serif;
  overflow: hidden;
}

/* HEADER */
.header {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  z-index: 10;
}

.header img {
  width: 100%;
  height: 60px;
  display: block;
}

#btn1{
  position:absolute;
  top:20px;
  left:10px;
  width:30px;
  height:30px;
  background:transparent;
  border:none;
  cursor:pointer;
}

/* SCROLL */
.contenido {
  position: absolute;
  top: -1px;
  left: 0;
  width: 100%;
  height: 100%;
  overflow-y: auto;
  padding-top: 1px;
}

/* IMAGEN SCROLL */
.fondo-img {
  width: 100%;
  display: block;
}

/* OVERLAY */
.overlay-datos {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  pointer-events: none;
}

.monto,
.nombre,
.cbu-label,
.cbu-valor,
.cuil-label,
.cuil-valor,
.fecha,
.dest-nombre,
.dest-banco-nombre,
.dest-cvu-label,
.dest-cvu-valor,
.dest-cuil-label,
.dest-cuil-valor,
.id-largo,
.codigo-random {
  position: absolute;
  pointer-events: auto;
}

/* MONTO */
.monto {
  top: 233px;
  left: 54px;
}

.monto .peso {
  position: absolute;
  top: 8px;
  left: -12px;
  font-size: 17px;
  font-weight: bold;
  color: #333333;
}

.monto .numero {
  position: absolute;
  top: -2px;
  left: 2px;
  font-size: 27px;
  font-weight: bold;
  color: #333333;
}

/* FECHA */
.fecha {
  top: 268px;
  left: 42px;
  font-size: 12px;
  color: #686868;
}

/* MIS DATOS */
.nombre {
  top: 365px;
  left: 83px;
  font-size: 15px;
  color: #373737;
}

.banco-fijo {
  position: absolute;
  top: 385px;   
  left: 83px;  
  font-size: 11px; 
  color: #9D9D9D;  
}

.cbu-label {
  top: 420px;
  left: 42px;
  font-size: 12px;
  color: #818181;
}

.cbu-valor {
  top: 438px;
  left: 42px;
  font-size: 15px;
  color: #0D0D0D;
}

.cuil-label {
  top: 475px;
  left: 42px;
  font-size: 12px;
  color: #818181;
}

.cuil-valor {
  top: 494px;
  left: 42px;
  font-size: 15px;
  color: #0D0D0D;
}

/* DESTINATARIO */
.dest-nombre {
  top: 601px;
  left: 83px;
  font-size: 15px;
  color: #373737;
}

.dest-banco-logo {
  position: absolute;
  top: 605px;
  left: 47px;
  width: 22px;
  height: 22px;
  object-fit: contain;
}

.dest-banco-nombre {
  top: 622px;
  left: 83px;
  font-size: 11px;
  color: #9D9D9D;
}

.dest-cvu-label {
  top: 655px;
  left: 42px;
  font-size: 13px;
  color: #818181;
}

.dest-cvu-valor {
  top: 675px;
  left: 42px;
  font-size: 15px;
  color: #0D0D0D;
}

.dest-cuil-label {
  top: 710px;
  left: 42px;
  font-size: 13px;
  color: #818181;
}

.dest-cuil-valor {
  top: 730px;
  left: 42px;
  font-size: 15px;
  color: #0D0D0D;
}


/* ========================= */
/* ===== NUEVOS TEXTOS ===== */
/* ========================= */

.id-largo {
  top: 912px;        /* ðŸ‘ˆ movÃ© */
  left: 42px;        /* ðŸ‘ˆ movÃ© */
  font-size: 15px;   /* ðŸ‘ˆ tamaÃ±o */
  color: #282828;    /* ðŸ‘ˆ color */
}

.codigo-random {
  top: 857px;        /* ðŸ‘ˆ movÃ© */
  left: 42px;        /* ðŸ‘ˆ movÃ© */
  font-size: 15px;   /* ðŸ‘ˆ tamaÃ±o */
  color: #282828;    /* ðŸ‘ˆ color */
}
</style>
</head>

<body>

<div class="header">
  <img src="img5/header_comprobante2.png" id="headerImg">
  
  <button id="btn1"></button>
  
</div>

<div class="contenido">
  <div id="espacioHeader"></div>

  <img src="img5/fondo_comprobante2.png" class="fondo-img">

  <div class="overlay-datos">

    <div class="monto">
      <span class="peso">$</span>
      <span class="numero" id="montoTexto">0</span>
    </div>

    <div class="fecha" id="fechaTexto"></div>

    <div class="nombre" id="nombreTexto"></div>
    
    <div class="banco-fijo">Naranja X</div>

    <div class="cbu-label">CBU</div>
    <div class="cbu-valor" id="cbuTexto"></div>

    <div class="cuil-label">CUIL</div>
    <div class="cuil-valor" id="cuilTexto"></div>

    <div class="dest-nombre" id="destNombre"></div>
    <img class="dest-banco-logo" id="destBancoLogo">
    <div class="dest-banco-nombre" id="destBancoNombre"></div>

    <div class="dest-cvu-label">CVU</div>
    <div class="dest-cvu-valor" id="destCvu"></div>

    <div class="dest-cuil-label">CUIL</div>
    <div class="dest-cuil-valor" id="destCuil"></div>

    <!-- NUEVOS -->
    <div class="id-largo" id="idLargo"></div>
    <div class="codigo-random" id="codigoRandom"></div>

  </div>
</div>

<script>
    
    function formatearCUIT(cuit) {
  cuit = cuit.replace(/\D/g,''); // quita cualquier cosa que no sea nÃºmero
  return cuit.length === 11 ? `${cuit.slice(0,2)}-${cuit.slice(2,10)}-${cuit.slice(10)}` : cuit;
}
    
   const btn1 = document.getElementById('btn1');
   btn1.onclick = () => location.href = 'comprobante.html';
   
   
/* HEADER */
const header = document.getElementById('headerImg');
const espacio = document.getElementById('espacioHeader');
header.onload = () => espacio.style.height = header.offsetHeight + 'px';

/* MIS DATOS */
document.getElementById("montoTexto").textContent =
  Number(localStorage.getItem("monto") || 0).toLocaleString("es-AR");

document.getElementById("nombreTexto").textContent =
  localStorage.getItem("mi_nombre_completo") || "";

document.getElementById("cbuTexto").textContent =
  localStorage.getItem("mi_cvu") || "";

const miCuil = localStorage.getItem("mi_cuil") || "";
document.getElementById("cuilTexto").textContent = formatearCUIT(miCuil);

/* FECHA */
/* FECHA (FORMATO NUMÃ‰RICO) */
const f = new Date();

const dia = String(f.getDate()).padStart(2,'0');
const mes = String(f.getMonth() + 1).padStart(2,'0');
const anio = f.getFullYear();
const hora = String(f.getHours()).padStart(2,'0');
const min = String(f.getMinutes()).padStart(2,'0');

document.getElementById("fechaTexto").textContent =
  `${dia}/${mes}/${anio} - ${hora}:${min}h`;

/* DESTINATARIO */
const d = JSON.parse(localStorage.getItem("selectedCuenta"));
if (d) {
  destNombre.textContent = d.nombre || "";
  destBancoNombre.textContent = d.banco || "";
  destCvu.textContent = d.cvu || "";
  destCuil.textContent = d.cuit || "";

  const l = destBancoLogo;
  const b = (d.banco || "").toLowerCase();
  if (b.includes("mercado")) l.src="img4/mercadopago.png";
  else if (b.includes("naranja")) l.src="img4/nx.png";
  else if (b.includes("uala")) l.src="img4/uala.png";
  else if (b.includes("brubank")) l.src="img4/brubank.png";
  else l.src="img4/banco_default.png";
}

/* ===== GENERADORES ===== */
function uuid() {
  return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, c => {
    const r = Math.random()*16|0, v = c=='x'?r:(r&0x3|0x8);
    return v.toString(16);
  });
}

function codigo(len=22) {
  const chars = "ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";
  return Array.from({length:len},()=>chars[Math.floor(Math.random()*chars.length)]).join('');
}

idLargo.textContent = uuid();
codigoRandom.textContent = codigo();


</script>

</body>
</html>